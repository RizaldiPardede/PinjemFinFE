<div class="auth-basic-wrapper d-flex align-items-center justify-content-center"
     style="background-image: url('assets/image/backgroundPinjemfin1.png'); background-size: cover; background-position: center; background-repeat: no-repeat; min-height: 100vh;">
  <div class="container-fluid my-5 my-lg-5">
    <div class="row">
      <div class="col-12 col-md-8 col-lg-6 col-xl-5 col-xxl-4 mx-auto">
        <div class="card rounded-4 mb-0 border-top shadow">
          <div class="card-body p-5">
            <img src="assets/image/bcafinancelogo.png" class="mb-4" width="300" alt="Logo BCA Finance">
            <h4 class="fw-bold">Ubah Password</h4>
            <p class="mb-0">Masukkan password lama dan password baru Anda</p>

            <div class="form-body my-5">
              <form class="row g-3" (ngSubmit)="onChangePasswordSubmit()" #passwordForm="ngForm">

                <!-- Password Lama -->
                <div class="col-12">
                  <label for="inputOldPassword" class="form-label">Password Lama</label>
                  <div class="input-group">
                    <input [type]="showOldPassword ? 'text' : 'password'"
                           [(ngModel)]="oldPassword" name="oldPassword"
                           class="form-control" id="inputOldPassword" placeholder="Masukkan password lama" required>
                    <button type="button" class="input-group-text" style="cursor: pointer;" (click)="toggleOldPasswordVisibility()">
                      <i class="bi" [ngClass]="showOldPassword ? 'bi-eye' : 'bi-eye-slash'"></i>
                    </button>
                  </div>
                </div>

                <!-- Password Baru -->
                <div class="col-12">
                  <label for="inputNewPassword" class="form-label">Password Baru</label>
                  <div class="input-group">
                    <input [type]="showNewPassword ? 'text' : 'password'"
                           [(ngModel)]="newPassword" name="newPassword"
                           class="form-control" id="inputNewPassword" placeholder="Masukkan password baru" required>
                    <button type="button" class="input-group-text" style="cursor: pointer;" (click)="toggleNewPasswordVisibility()">
                      <i class="bi" [ngClass]="showNewPassword ? 'bi-eye' : 'bi-eye-slash'"></i>
                    </button>
                  </div>
                </div>

                <!-- Konfirmasi Password -->
                <div class="col-12">
                  <label for="inputConfirmPassword" class="form-label">Konfirmasi Password Baru</label>
                  <input [type]="showNewPassword ? 'text' : 'password'"
                         [(ngModel)]="confirmPassword" name="confirmPassword"
                         class="form-control" id="inputConfirmPassword" placeholder="Konfirmasi password baru" required>

                  <div *ngIf="confirmPassword && newPassword !== confirmPassword" class="text-danger mt-1 small">
                    Konfirmasi password tidak cocok.
                  </div>
                </div>

                <!-- Tombol Submit -->
                <div class="col-12">
                  <div class="d-grid">
                    <button type="submit" class="btn btn-grd-primary"
                            [disabled]="isLoading || newPassword !== confirmPassword">
                      <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                      {{ isLoading ? 'Memproses...' : 'Ubah Password' }}
                    </button>
                  </div>
                </div>

              </form>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>
